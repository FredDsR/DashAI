{"ast":null,"code":"import _defineProperty from\"/home/ubuntu/DashAI/captum/insights/attr_vis/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"/home/ubuntu/DashAI/captum/insights/attr_vis/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/ubuntu/DashAI/captum/insights/attr_vis/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/ubuntu/DashAI/captum/insights/attr_vis/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/ubuntu/DashAI/captum/insights/attr_vis/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from\"react\";import styles from\"../App.module.css\";import cx from\"../utils/cx\";import Feature from\"./Feature\";import Spinner from\"./Spinner\";import LabelButton from\"./LabelButton\";import Contributions from\"./Contributions\";var Visualization=/*#__PURE__*/function(_React$Component){_inherits(Visualization,_React$Component);var _super=_createSuper(Visualization);function Visualization(props){var _this;_classCallCheck(this,Visualization);_this=_super.call(this,props);_this.onTargetClick=function(labelIndex,instance){_this.setState({loading:true});_this.props.onTargetClick(labelIndex,instance,function(){return _this.setState({loading:false});});};_this.state={loading:false};return _this;}_createClass(Visualization,[{key:\"render\",value:function render(){var _cx,_this2=this;var data=this.props.data;console.log(\"visualization\",data);var features=data.feature_outputs.map(function(f){return/*#__PURE__*/React.createElement(Feature,{data:f});});return/*#__PURE__*/React.createElement(React.Fragment,null,this.state.loading&&/*#__PURE__*/React.createElement(\"div\",{className:styles.loading},/*#__PURE__*/React.createElement(Spinner,null)),/*#__PURE__*/React.createElement(\"div\",{className:cx((_cx={},_defineProperty(_cx,styles.panel,true),_defineProperty(_cx,styles[\"panel--long\"],true),_defineProperty(_cx,styles[\"panel--loading\"],this.state.loading),_cx))},/*#__PURE__*/React.createElement(\"div\",{className:styles[\"panel__column\"]},/*#__PURE__*/React.createElement(\"div\",{className:styles[\"panel__column__title\"]},\"Predicted\"),/*#__PURE__*/React.createElement(\"div\",{className:styles[\"panel__column__body\"]},data.predicted.map(function(p){return/*#__PURE__*/React.createElement(\"div\",{className:cx([styles.row,styles[\"row--padding\"]])},/*#__PURE__*/React.createElement(LabelButton,{onTargetClick:_this2.onTargetClick,labelIndex:p.index,instance:_this2.props.instance,active:p.index===data.active_index},p.label,\" (\",p.score.toFixed(3),\")\"));}))),/*#__PURE__*/React.createElement(\"div\",{className:styles[\"panel__column\"]},/*#__PURE__*/React.createElement(\"div\",{className:styles[\"panel__column__title\"]},\"Label\"),/*#__PURE__*/React.createElement(\"div\",{className:styles[\"panel__column__body\"]},/*#__PURE__*/React.createElement(\"div\",{className:cx([styles.row,styles[\"row--padding\"]])},/*#__PURE__*/React.createElement(LabelButton,{onTargetClick:this.onTargetClick,labelIndex:data.actual.index,instance:this.props.instance,active:data.actual.index===data.active_index},data.actual.label)))),/*#__PURE__*/React.createElement(\"div\",{className:styles[\"panel__column\"]},/*#__PURE__*/React.createElement(\"div\",{className:styles[\"panel__column__title\"]},\"Contribution\"),/*#__PURE__*/React.createElement(\"div\",{className:styles[\"panel__column__body\"]},/*#__PURE__*/React.createElement(\"div\",{className:styles[\"bar-chart\"]},/*#__PURE__*/React.createElement(Contributions,{feature_outputs:data.feature_outputs})))),/*#__PURE__*/React.createElement(\"div\",{className:cx([styles[\"panel__column\"],styles[\"panel__column--stretch\"]])},features)));}}]);return Visualization;}(React.Component);export default Visualization;","map":{"version":3,"sources":["/home/ubuntu/DashAI/captum/insights/attr_vis/frontend/src/components/Visualization.tsx"],"names":["React","styles","cx","Feature","Spinner","LabelButton","Contributions","Visualization","props","onTargetClick","labelIndex","instance","setState","loading","state","data","console","log","features","feature_outputs","map","f","panel","predicted","p","row","index","active_index","label","score","toFixed","actual","Component"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport styles from \"../App.module.css\";\nimport cx from \"../utils/cx\";\nimport Feature from \"./Feature\";\nimport Spinner from \"./Spinner\";\nimport LabelButton from \"./LabelButton\";\nimport Contributions from \"./Contributions\";\nimport { VisualizationOutput } from \"../models/visualizationOutput\";\n\ninterface VisualizationProps {\n  data: VisualizationOutput;\n  instance: number;\n  onTargetClick: (labelIndex: number, instance: number, callback: () => void) => void;\n}\n\ninterface VisualizationState {\n  loading: boolean;\n}\n\nclass Visualization extends React.Component<VisualizationProps, VisualizationState> {\n  constructor(props: VisualizationProps) {\n    super(props);\n    this.state = {\n      loading: false,\n    };\n  }\n\n  onTargetClick = (labelIndex: number, instance: number) => {\n    this.setState({ loading: true });\n    this.props.onTargetClick(labelIndex, instance, () =>\n      this.setState({ loading: false })\n    );\n  };\n\n  render() {\n    const data = this.props.data;\n    console.log(\"visualization\", data);\n    const features = data.feature_outputs.map((f) => <Feature data={f} />);\n\n    return (\n      <>\n        {this.state.loading && (\n          <div className={styles.loading}>\n            <Spinner />\n          </div>\n        )}\n        <div\n          className={cx({\n            [styles.panel]: true,\n            [styles[\"panel--long\"]]: true,\n            [styles[\"panel--loading\"]]: this.state.loading,\n          })}\n        >\n          <div className={styles[\"panel__column\"]}>\n            <div className={styles[\"panel__column__title\"]}>Predicted</div>\n            <div className={styles[\"panel__column__body\"]}>\n              {data.predicted.map((p) => (\n                <div className={cx([styles.row, styles[\"row--padding\"]])}>\n                  <LabelButton\n                    onTargetClick={this.onTargetClick}\n                    labelIndex={p.index}\n                    instance={this.props.instance}\n                    active={p.index === data.active_index}\n                  >\n                    {p.label} ({p.score.toFixed(3)})\n                  </LabelButton>\n                </div>\n              ))}\n            </div>\n          </div>\n          <div className={styles[\"panel__column\"]}>\n            <div className={styles[\"panel__column__title\"]}>Label</div>\n            <div className={styles[\"panel__column__body\"]}>\n              <div className={cx([styles.row, styles[\"row--padding\"]])}>\n                <LabelButton\n                  onTargetClick={this.onTargetClick}\n                  labelIndex={data.actual.index}\n                  instance={this.props.instance}\n                  active={data.actual.index === data.active_index}\n                >\n                  {data.actual.label}\n                </LabelButton>\n              </div>\n            </div>\n          </div>\n          <div className={styles[\"panel__column\"]}>\n            <div className={styles[\"panel__column__title\"]}>Contribution</div>\n            <div className={styles[\"panel__column__body\"]}>\n              <div className={styles[\"bar-chart\"]}>\n                <Contributions feature_outputs={data.feature_outputs} />\n              </div>\n            </div>\n          </div>\n          <div\n            className={cx([\n              styles[\"panel__column\"],\n              styles[\"panel__column--stretch\"],\n            ])}\n          >\n            {features}\n          </div>\n        </div>\n      </>\n    );\n  }\n}\n\nexport default Visualization;\n"]},"metadata":{},"sourceType":"module"}