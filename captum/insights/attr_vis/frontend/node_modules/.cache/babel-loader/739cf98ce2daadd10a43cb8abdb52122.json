{"ast":null,"code":"import _defineProperty from\"/home/ubuntu/DashAI/captum/insights/attr_vis/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _toConsumableArray from\"/home/ubuntu/DashAI/captum/insights/attr_vis/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _classCallCheck from\"/home/ubuntu/DashAI/captum/insights/attr_vis/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/ubuntu/DashAI/captum/insights/attr_vis/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/ubuntu/DashAI/captum/insights/attr_vis/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/ubuntu/DashAI/captum/insights/attr_vis/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from\"react\";import Filter from\"./Filter\";function parseEventTargetValue(target){switch(target.type){case\"checkbox\":return target.checked;case\"number\":return parseInt(target.value);default:return target.value;}}var FilterContainer=/*#__PURE__*/function(_React$Component){_inherits(FilterContainer,_React$Component);var _super=_createSuper(FilterContainer);function FilterContainer(props){var _this;_classCallCheck(this,FilterContainer);_this=_super.call(this,props);_this.handleClassDelete=function(classId){var classes=_this.state.classes.slice(0);var removed_class=classes.splice(classId,1);var suggested_classes=[].concat(_toConsumableArray(_this.state.suggested_classes),_toConsumableArray(removed_class));_this.setState({classes:classes,suggested_classes:suggested_classes});};_this.handleClassAdd=function(added_class){var classes=[].concat(_toConsumableArray(_this.state.classes),[added_class]);var suggested_classes=_this.state.suggested_classes.filter(function(t){return t.id!==added_class.id;});_this.setState({classes:classes,suggested_classes:suggested_classes});};_this.handleInputChange=function(event){var target=event.target;var value=parseEventTargetValue(event.target);var name=target.name;_this.setState(_defineProperty({},name,value));};_this.handleArgumentChange=function(event){var target=event.target;var name=target.name;var value=parseEventTargetValue(target);var method_arguments=_this.state.method_arguments;method_arguments[_this.state.selected_method][name].value=value;_this.setState({method_arguments:method_arguments});};_this.handleSubmit=function(event){var method=_this.state.selected_method;var method_arguments=_this.state.method_arguments;var argument_config=method in method_arguments?method_arguments[method]:{};var args={};Object.keys(argument_config).forEach(function(key){args[key]=argument_config[key].value;});var data={prediction:_this.state.prediction,classes:_this.state.classes.map(function(classId){return classId[\"name\"];}),attribution_method:method,arguments:args};_this.props.fetchData(data);event.preventDefault();};var _suggested_classes=props.config.classes.map(function(c,classId){return{id:classId,name:c};});_this.state={prediction:\"all\",classes:[],suggested_classes:_suggested_classes,selected_method:props.config.selected_method,method_arguments:props.config.method_arguments};return _this;}_createClass(FilterContainer,[{key:\"render\",value:function render(){return/*#__PURE__*/React.createElement(Filter,{prediction:this.state.prediction,classes:this.state.classes,suggestedClasses:this.state.suggested_classes,selectedMethod:this.state.selected_method,methodArguments:this.state.method_arguments,methods:this.props.config.methods,handleClassAdd:this.handleClassAdd,handleClassDelete:this.handleClassDelete,handleInputChange:this.handleInputChange,handleArgumentChange:this.handleArgumentChange,handleSubmit:this.handleSubmit});}}]);return FilterContainer;}(React.Component);export default FilterContainer;","map":{"version":3,"sources":["/home/ubuntu/DashAI/captum/insights/attr_vis/frontend/src/components/FilterContainer.tsx"],"names":["React","Filter","parseEventTargetValue","target","type","checked","parseInt","value","FilterContainer","props","handleClassDelete","classId","classes","state","slice","removed_class","splice","suggested_classes","setState","handleClassAdd","added_class","filter","t","id","handleInputChange","event","name","handleArgumentChange","method_arguments","selected_method","handleSubmit","method","argument_config","args","Object","keys","forEach","key","data","prediction","map","attribution_method","arguments","fetchData","preventDefault","config","c","methods","Component"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport Filter from \"./Filter\";\nimport { InsightsConfig, MethodsArguments } from \"../models/insightsConfig\";\nimport { TagClass, FilterConfig } from \"../models/filter\";\nimport { UserInputField } from \"../models/typeHelpers\";\n\nfunction parseEventTargetValue(target: UserInputField) {\n  switch (target.type) {\n    case \"checkbox\":\n      return (target as HTMLInputElement).checked;\n    case \"number\":\n      return parseInt(target.value);\n    default:\n      return target.value;\n  }\n}\n\ninterface FilterContainerProps {\n  config: InsightsConfig;\n  fetchData: (filter_config: FilterConfig) => void;\n}\n\ninterface FilterContainerState {\n  prediction: string;\n  classes: TagClass[];\n  suggested_classes: TagClass[];\n  selected_method: string;\n  method_arguments: MethodsArguments;\n}\n\nclass FilterContainer extends React.Component<FilterContainerProps, FilterContainerState> {\n  constructor(props: FilterContainerProps) {\n    super(props);\n    const suggested_classes = props.config.classes.map((c, classId) => ({\n      id: classId,\n      name: c,\n    }));\n    this.state = {\n      prediction: \"all\",\n      classes: [],\n      suggested_classes: suggested_classes,\n      selected_method: props.config.selected_method,\n      method_arguments: props.config.method_arguments,\n    };\n  }\n\n  handleClassDelete = (classId: number) => {\n    const classes = this.state.classes.slice(0);\n    const removed_class = classes.splice(classId, 1);\n    const suggested_classes = [...this.state.suggested_classes, ...removed_class];\n    this.setState({ classes, suggested_classes });\n  };\n\n  handleClassAdd = (added_class: TagClass) => {\n    const classes = [...this.state.classes, added_class];\n    const suggested_classes = this.state.suggested_classes.filter(\n      (t) => t.id !== added_class.id\n    );\n    this.setState({ classes, suggested_classes });\n  };\n\n  handleInputChange = (event: React.ChangeEvent<UserInputField>) => {\n    const target = event.target;\n    const value = parseEventTargetValue(event.target);\n    const name = target.name;\n    this.setState({\n      [name]: value,\n    } as any);\n  };\n\n  handleArgumentChange = (event: React.ChangeEvent<UserInputField>) => {\n    const target = event.target;\n    const name = target.name;\n    const value = parseEventTargetValue(target);\n    const method_arguments = this.state.method_arguments;\n    method_arguments[this.state.selected_method][name].value = value;\n    this.setState({ method_arguments });\n  };\n\n  handleSubmit = (event: React.FormEvent) => {\n    const method = this.state.selected_method;\n    const method_arguments = this.state.method_arguments;\n    const argument_config =\n      method in method_arguments ? method_arguments[method] : {};\n    const args: { [key: string]: string | boolean | number } = {};\n    Object.keys(argument_config).forEach(function (key) {\n      args[key] = argument_config[key].value;\n    });\n    const data = {\n      prediction: this.state.prediction,\n      classes: this.state.classes.map((classId) => classId[\"name\"]),\n      attribution_method: method,\n      arguments: args,\n    };\n    this.props.fetchData(data);\n    event.preventDefault();\n  };\n\n  render() {\n    return (\n      <Filter\n        prediction={this.state.prediction}\n        classes={this.state.classes}\n        suggestedClasses={this.state.suggested_classes}\n        selectedMethod={this.state.selected_method}\n        methodArguments={this.state.method_arguments}\n        methods={this.props.config.methods}\n        handleClassAdd={this.handleClassAdd}\n        handleClassDelete={this.handleClassDelete}\n        handleInputChange={this.handleInputChange}\n        handleArgumentChange={this.handleArgumentChange}\n        handleSubmit={this.handleSubmit}\n      />\n    );\n  }\n}\n\nexport default FilterContainer;\n"]},"metadata":{},"sourceType":"module"}