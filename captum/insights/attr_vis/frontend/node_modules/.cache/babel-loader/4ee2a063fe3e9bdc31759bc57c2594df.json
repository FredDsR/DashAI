{"ast":null,"code":"import _classCallCheck from\"/home/ubuntu/DashAI/captum/insights/attr_vis/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/ubuntu/DashAI/captum/insights/attr_vis/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/ubuntu/DashAI/captum/insights/attr_vis/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/ubuntu/DashAI/captum/insights/attr_vis/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from\"react\";import AppBase from\"./App\";var WebApp=/*#__PURE__*/function(_React$Component){_inherits(WebApp,_React$Component);var _super=_createSuper(WebApp);function WebApp(props){var _this;_classCallCheck(this,WebApp);_this=_super.call(this,props);_this._fetchInit=function(){fetch(\"init\").then(function(r){return r.json();}).then(function(r){return _this.setState({config:r});});};_this.fetchData=function(filter_config){_this.setState({loading:true});fetch(\"fetch\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify(filter_config)}).then(function(response){return response.json();}).then(function(response){return _this.setState({data:response,loading:false});});};_this.onTargetClick=function(labelIndex,instance,callback){fetch(\"attribute\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({labelIndex:labelIndex,instance:instance})}).then(function(response){return response.json();}).then(function(response){var _this$state$data;var data=(_this$state$data=_this.state.data)!==null&&_this$state$data!==void 0?_this$state$data:[];data[instance]=response;_this.setState({data:data});callback();});};_this.state={data:[],config:{classes:[],methods:[],method_arguments:{},selected_method:\"\"},loading:false};_this._fetchInit();return _this;}_createClass(WebApp,[{key:\"render\",value:function render(){return/*#__PURE__*/React.createElement(AppBase,{fetchData:this.fetchData,fetchInit:this._fetchInit,onTargetClick:this.onTargetClick,data:this.state.data,config:this.state.config,loading:this.state.loading});}}]);return WebApp;}(React.Component);export default WebApp;","map":{"version":3,"sources":["/home/ubuntu/DashAI/captum/insights/attr_vis/frontend/src/WebApp.tsx"],"names":["React","AppBase","WebApp","props","_fetchInit","fetch","then","r","json","setState","config","fetchData","filter_config","loading","method","headers","body","JSON","stringify","response","data","onTargetClick","labelIndex","instance","callback","state","classes","methods","method_arguments","selected_method","Component"],"mappings":"gqBAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,OAAP,KAAoB,OAApB,C,GAYMC,CAAAA,M,4GACJ,gBAAYC,KAAZ,CAAuB,wCACrB,uBAAMA,KAAN,EADqB,MAevBC,UAfuB,CAeV,UAAM,CACjBC,KAAK,CAAC,MAAD,CAAL,CACGC,IADH,CACQ,SAAAC,CAAC,QAAIA,CAAAA,CAAC,CAACC,IAAF,EAAJ,EADT,EAEGF,IAFH,CAEQ,SAAAC,CAAC,QAAI,OAAKE,QAAL,CAAc,CAAEC,MAAM,CAAEH,CAAV,CAAd,CAAJ,EAFT,EAGD,CAnBsB,OAqBvBI,SArBuB,CAqBX,SAACC,aAAD,CAAiC,CAC3C,MAAKH,QAAL,CAAc,CAAEI,OAAO,CAAE,IAAX,CAAd,EACAR,KAAK,CAAC,OAAD,CAAU,CACbS,MAAM,CAAE,MADK,CAEbC,OAAO,CAAE,CACP,eAAgB,kBADT,CAFI,CAKbC,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAeN,aAAf,CALO,CAAV,CAAL,CAOGN,IAPH,CAOQ,SAAAa,QAAQ,QAAIA,CAAAA,QAAQ,CAACX,IAAT,EAAJ,EAPhB,EAQGF,IARH,CAQQ,SAAAa,QAAQ,QAAI,OAAKV,QAAL,CAAc,CAAEW,IAAI,CAAED,QAAR,CAAkBN,OAAO,CAAE,KAA3B,CAAd,CAAJ,EARhB,EASD,CAhCsB,OAkCvBQ,aAlCuB,CAkCP,SAACC,UAAD,CAAqBC,QAArB,CAAuCC,QAAvC,CAAgE,CAC9EnB,KAAK,CAAC,WAAD,CAAc,CACjBS,MAAM,CAAE,MADS,CAEjBC,OAAO,CAAE,CACP,eAAgB,kBADT,CAFQ,CAKjBC,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAe,CAAEI,UAAU,CAAVA,UAAF,CAAcC,QAAQ,CAARA,QAAd,CAAf,CALW,CAAd,CAAL,CAOGjB,IAPH,CAOQ,SAAAa,QAAQ,QAAIA,CAAAA,QAAQ,CAACX,IAAT,EAAJ,EAPhB,EAQGF,IARH,CAQQ,SAAAa,QAAQ,CAAI,sBAChB,GAAMC,CAAAA,IAAI,mBAAG,MAAKK,KAAL,CAAWL,IAAd,qDAAsB,EAAhC,CACAA,IAAI,CAACG,QAAD,CAAJ,CAAiBJ,QAAjB,CACA,MAAKV,QAAL,CAAc,CAAEW,IAAI,CAAJA,IAAF,CAAd,EACAI,QAAQ,GACT,CAbH,EAcD,CAjDsB,CAErB,MAAKC,KAAL,CAAa,CACXL,IAAI,CAAE,EADK,CAEXV,MAAM,CAAE,CACNgB,OAAO,CAAE,EADH,CAENC,OAAO,CAAE,EAFH,CAGNC,gBAAgB,CAAE,EAHZ,CAINC,eAAe,CAAE,EAJX,CAFG,CAQXhB,OAAO,CAAE,KARE,CAAb,CAUA,MAAKT,UAAL,GAZqB,aAatB,C,0DAsCQ,CACP,mBACE,oBAAC,OAAD,EACE,SAAS,CAAE,KAAKO,SADlB,CAEE,SAAS,CAAE,KAAKP,UAFlB,CAGE,aAAa,CAAE,KAAKiB,aAHtB,CAIE,IAAI,CAAE,KAAKI,KAAL,CAAWL,IAJnB,CAKE,MAAM,CAAE,KAAKK,KAAL,CAAWf,MALrB,CAME,OAAO,CAAE,KAAKe,KAAL,CAAWZ,OANtB,EADF,CAUD,C,oBA/DkBb,KAAK,CAAC8B,S,EAkE3B,cAAe5B,CAAAA,MAAf","sourcesContent":["import React from \"react\";\nimport AppBase from \"./App\";\nimport { FilterConfig } from './models/filter';\nimport { VisualizationOutput } from \"./models/visualizationOutput\";\nimport { InsightsConfig } from \"./models/insightsConfig\";\n\n\ninterface WebAppState {\n  data: VisualizationOutput[];\n  config: InsightsConfig;\n  loading: boolean;\n}\n\nclass WebApp extends React.Component<{}, WebAppState> {\n  constructor(props: {}) {\n    super(props);\n    this.state = {\n      data: [],\n      config: {\n        classes: [],\n        methods: [],\n        method_arguments: {},\n        selected_method: \"\"\n      },\n      loading: false\n    };\n    this._fetchInit();\n  }\n\n  _fetchInit = () => {\n    fetch(\"init\")\n      .then(r => r.json())\n      .then(r => this.setState({ config: r }));\n  };\n\n  fetchData = (filter_config: FilterConfig) => {\n    this.setState({ loading: true });\n    fetch(\"fetch\", {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify(filter_config)\n    })\n      .then(response => response.json())\n      .then(response => this.setState({ data: response, loading: false }));\n  };\n\n  onTargetClick = (labelIndex: number, instance: number, callback: () => void) => {\n    fetch(\"attribute\", {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({ labelIndex, instance })\n    })\n      .then(response => response.json())\n      .then(response => {\n        const data = this.state.data ?? [];\n        data[instance] = response;\n        this.setState({ data });\n        callback();\n      });\n  };\n\n  render() {\n    return (\n      <AppBase\n        fetchData={this.fetchData}\n        fetchInit={this._fetchInit}\n        onTargetClick={this.onTargetClick}\n        data={this.state.data}\n        config={this.state.config}\n        loading={this.state.loading}\n      />\n    );\n  }\n}\n\nexport default WebApp;\n"]},"metadata":{},"sourceType":"module"}